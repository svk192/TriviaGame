<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">


    <title>Trivia</title>

    <link rel="stylesheet" type="text/css" href="assets/css/reset.css">
    <link href="https://fonts.googleapis.com/css?family=Handlee|Shadows+Into+Light+Two&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">


</head>

<body>
    <h1>Trivia Game</h1>
    <br>


    <br>
    <div id="container">
        <input id="StartGame" type="button" value="Start Game">
    <div id = "Top">
        <div id="display"></div>
        <div id="Question"></div>
    </div>
        <div id="Options"></div>
        <div id="result"></div>
    </div>
    </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var questions = [
                {
                    question: "What is Joey's middle name?",
                    options: ["Frances", "Kangaroo", "Muriel"],
                    answer: "Frances",
          
                },

                {
                    question: "What is Joey's favorite food?",
                    options: ["Sandwiches", "Salad", "Pizza"],
                    answer: "Sandwiches",
                 
                },

                {
                    question: "What is Monica's Occupation",
                    options: ["Masseuse", "Chef", "Agent"],
                    answer: "Chef",
          
                },
                {
                    question: "Whose catchphrase is 'Oh My God!'?",
                    options: ["Janice", "Monica", "Ross"],
                    answer: "Janice",
          
                },
                {
                    question: "What is the name of the Coffee Shop?",
                    options: ["Friends Cafe", "Central Perk", "Central Park"],
                    answer: "Central Perk",
          
                },
                {
                    question: "Who was the bride in the first one?",
                    options: ["Pheobe", "Monica", "Rachel"],
                    answer: "Rachel",
          
                },
            
            ];

           var questionNumber = [0,1,2,3,4,5]; 
           shuffle(questionNumber);
            var clockRunning = false;
            var intervalId;
            var wins = 0;
            var losses = 0;
            var counter = 0;
            var questionNumber = 0;
            var delayButtonAlert;

            var time = 30;


            $(document).on("click", "#StartGame", function () {
                // event.preventDefault();

                $(this).remove();
                nextquestion();


            });

            // $("#StartGame").on("click", function () {
            $(document).on("click", ".option", function () {
                console.log("counter" + counter);
                // event.preventDefault();//
                
                checkAnswer($(this).attr("data-letter"));

            });

            // });

            function nextquestion() {
                console.log("counter" + counter);
                if (counter < 5) {

                    reset();
                    displayQuestion();

                }
                else {
                    $("#container").html("<p>" + "End!" + "</p><br> Wins:" + wins + "<br> Losses:" + losses);
                    stop();
                }


                delayButtonAlert = setTimeout(checkAnswer, 30000,0);
            }

            function checkAnswer(data) {

                console.log(data);
                stop();
                if (data === 0) {
                    console.log("Timout");
                    losses++;
                    $("#Options").empty();
                    $("#Question").empty();

                    $("#display").empty();
                    $("#result").html("<p>" + "Time Out!" + "</p>");

                    delayButtonAlert = setTimeout(nextquestion, 2000);

                }


               else if (data === questions[questionNumber].answer) {
                    console.log("Correct");
                    wins++;
                    $("#Options").empty();
                    $("#Question").empty();

                    $("#display").empty();
                    $("#result").html("<p>" + "Correct!" + "</p>");

                    delayButtonAlert = setTimeout(nextquestion, 2000);

                }
                else {
                    console.log("Not Correct");
                    losses++;
                    $("#Options").empty();
                    $("#Question").empty();
                    $("#display").empty();

                    delayButtonAlert = setTimeout(nextquestion, 2000);

                    $("#result").html("<p>" + "Not Correct!" + "</p>")



                }

            }


            function displayQuestion() {


                    questionNumber = counter;   

                $("#Question").html(questions[questionNumber].question);
                shuffle( questions[questionNumber].options);
                for (i = 0; i < 3; i++) {

                    var newDiv = $("<div>");
                    newDiv.html((i + 1) + ") " + questions[questionNumber].options[i]);
                    // $("#Options").append("<div>" + (i + 1) + ") " + questions[qno].options[i] + "</div>");

                    newDiv.attr("data-letter", questions[questionNumber].options[i]);
                    newDiv.addClass("option");
                    $("#Options").append(newDiv);
                }

                counter++;

            }



            function shuffle ( array ) { array . sort ( ( ) => Math . random ( ) - 0.5 ) ; } 




            function start() {

                // DONE: Use setInterval to start the count here and set the clock to running.
                if (!clockRunning) {
                    intervalId = setInterval(count, 1000);
                    clockRunning = true;
                }
            }

            function count() {
                time--;

                var converted = time;
                console.log(converted);
                $("#display").text("Time Remaining:" + converted);
            }

            function stop() {
                clearInterval(intervalId);
                clockRunning = false;
            }

            function reset() {
                stop();

                $("#Options").empty();
                $("#Question").empty();
                $("#result").empty();

                time = 30;

                $("#display").text("Time Remaining: 30");
                start();
            }


        });
    </script>

</body>

</html>